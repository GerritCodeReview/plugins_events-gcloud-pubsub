{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e3d9085a_66deb009",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "nit: pubSubSubscriberMetrics?",
      "range": {
        "startLine": 41,
        "startChar": 40,
        "endLine": 41,
        "endChar": 60
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4deb861_8f7e98cd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "I renamed this to subscriberMetrics, to make it consistent to publisherMetrics.",
      "parentUuid": "e3d9085a_66deb009",
      "range": {
        "startLine": 41,
        "startChar": 40,
        "endLine": 41,
        "endChar": 60
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "503c2640_4ff2d988",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "If we end up here we also have a failure in the message consumption. Why not increasing the metric here as well?",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8357432_70100f6f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "I believe this is different.\nWhen we end-up here we have a failure in *subscribing* to the topic, not in *consuming* messages (there might not even be messages in the topic, or perhaps there might not even be a topic).\n\nWDYT?",
      "parentUuid": "503c2640_4ff2d988",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "177ca1ab_3b8c9762",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 71,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-27T08:01:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d8357432_70100f6f",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "938c40bd_4e2c5614",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "Same as line 71",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "750dd5ea_f9420021",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "See my comment above, this is a failure in subscribing to the topic, we shouldn\u0027t increment message consumption failures.",
      "parentUuid": "938c40bd_4e2c5614",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0fb368d5_6b6c9218",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-27T08:01:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "750dd5ea_f9420021",
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24b86171_0132c3e2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "The addition of this try/catch makes the logic slightly different than before. Before if we were having an exception we were capturing it in the external catch (L70 or L72), while now we are catching it here.\n\nWhen catching the exception here, will the \"subscriberProvider.get\" throw another one?",
      "range": {
        "startLine": 107,
        "startChar": 6,
        "endLine": 112,
        "endChar": 7
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a64ea7b_d63e14f4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "this method returns a MessageReceiver, but does *not* execute its code block immediately: this is the code that will be executed when consuming a message (in a different thread).\n\nThis was true even before, so the addition of the try {} catch {} block doesn\u0027t change any logic I think:\n\n* The subscribe() will still catch any exception related to subscription to the topic\n* The (newly added) try {} catch {} in this block will allow the *receiver* to catch exceptions when *consuming* (we didn\u0027t have anything before).\n\nHope it makes sense?",
      "parentUuid": "24b86171_0132c3e2",
      "range": {
        "startLine": 107,
        "startChar": 6,
        "endLine": 112,
        "endChar": 7
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15749488_34b7f106",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-27T08:01:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a64ea7b_d63e14f4",
      "range": {
        "startLine": 107,
        "startChar": 6,
        "endLine": 112,
        "endChar": 7
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a44d466_75ad2a7a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "success_counter ? for consistency with failure_counter and to make clear is not the total.",
      "range": {
        "startLine": 35,
        "startChar": 59,
        "endLine": 35,
        "endChar": 66
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d0dc70b_543f8018",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-24T00:56:14Z",
      "side": 1,
      "message": "Should this be injected as @PluginName?",
      "range": {
        "startLine": 35,
        "startChar": 13,
        "endLine": 35,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1a107b0_e76df026",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7d0dc70b_543f8018",
      "range": {
        "startLine": 35,
        "startChar": 13,
        "endLine": 35,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "042a3e68_f535942f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5a44d466_75ad2a7a",
      "range": {
        "startLine": 35,
        "startChar": 59,
        "endLine": 35,
        "endChar": 66
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11a5b7e3_a05a76b6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "There is a \"rateDescription\" method in PubSubEventsMetrics that does that, why not using it?",
      "range": {
        "startLine": 36,
        "startChar": 12,
        "endLine": 38,
        "endChar": 36
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "029fd8b2_d9e65a0d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "11a5b7e3_a05a76b6",
      "range": {
        "startLine": 36,
        "startChar": 12,
        "endLine": 38,
        "endChar": 36
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8488033a_adab5266",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "There is a \"rateDescription\" method in PubSubEventsMetrics that does that, why not using it?",
      "range": {
        "startLine": 43,
        "startChar": 12,
        "endLine": 43,
        "endChar": 95
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7ce0641_3abfc57a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8488033a_adab5266",
      "range": {
        "startLine": 43,
        "startChar": 12,
        "endLine": 43,
        "endChar": 95
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "728bedd0_ba0864b3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "incrementSucceedToConsumeMessage for consistency with the subscriber",
      "range": {
        "startLine": 47,
        "startChar": 14,
        "endLine": 47,
        "endChar": 44
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67228cda_8c3f6407",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubPublisherMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "728bedd0_ba0864b3",
      "range": {
        "startLine": 47,
        "startChar": 14,
        "endLine": 47,
        "endChar": 44
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c302bf8a_b55824ab",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-24T00:56:14Z",
      "side": 1,
      "message": "To be injected as @PluginName",
      "range": {
        "startLine": 37,
        "startChar": 13,
        "endLine": 37,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "545e69be_94780c66",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c302bf8a_b55824ab",
      "range": {
        "startLine": 37,
        "startChar": 13,
        "endLine": 37,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67aa0504_4317cb40",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "There is a \"rateDescription\" method in PubSubEventsMetrics that does that, why not using it?",
      "range": {
        "startLine": 38,
        "startChar": 12,
        "endLine": 40,
        "endChar": 36
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7d41cd7_d8eb3776",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "67aa0504_4317cb40",
      "range": {
        "startLine": 38,
        "startChar": 12,
        "endLine": 40,
        "endChar": 36
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f00ae448_f0000b80",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-24T00:56:14Z",
      "side": 1,
      "message": "To be injected as @PluginName",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "860d9093_14f448d0",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 44,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f00ae448_f0000b80",
      "range": {
        "startLine": 44,
        "startChar": 13,
        "endLine": 44,
        "endChar": 26
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "763ef23f_04f14bb4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-04-23T12:47:41Z",
      "side": 1,
      "message": "There is a \"rateDescription\" method in PubSubEventsMetrics that does that, why not using it?",
      "range": {
        "startLine": 45,
        "startChar": 12,
        "endLine": 47,
        "endChar": 34
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71c70a7c_2cb68caf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubSubscriberMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 47,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-04-26T12:17:52Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "763ef23f_04f14bb4",
      "range": {
        "startLine": 45,
        "startChar": 12,
        "endLine": 47,
        "endChar": 34
      },
      "revId": "e41ed3a04def160eac5d0d994a2bd5f7b94345ec",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}